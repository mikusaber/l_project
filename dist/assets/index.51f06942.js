var C=Object.defineProperty;var k=Object.getOwnPropertySymbols;var T=Object.prototype.hasOwnProperty,z=Object.prototype.propertyIsEnumerable;var y=(s,i,e)=>i in s?C(s,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[i]=e,p=(s,i)=>{for(var e in i||(i={}))T.call(i,e)&&y(s,e,i[e]);if(k)for(var e of k(i))z.call(i,e)&&y(s,e,i[e]);return s};import{_ as B}from"./next.234c8bae.js";import{_ as q,r as E,a as R,w as b,o as n,c as u,b as _,u as a,d as f,e as U,f as m,k as $,F as L,g as M,h,i as d,S as F,t as v,l as S,m as j,p as A,j as H}from"./index.7dbf11ab.js";import"./index.02745042.js";import{g as J}from"./market.4437a618.js";import{E as K}from"./Empty.980eecc3.js";import{P as O}from"./PopSearch.b60e83bf.js";import"./lodash.e3e97856.js";import"./request.869d566e.js";/* empty css                                                          */import"./index.014ecec4.js";const W=s=>(A("data-v-29b08799"),s=s(),H(),s),X={class:"market"},Y=W(()=>d("p",null,"\u6CA1\u6709\u66F4\u591A\u4E86",-1)),Z={class:"market_list"},ee=["onClick"],te={key:0,class:"text-status"},ae=["src"],se={class:"market_title"},ie={class:"market_price flex-between"},oe={class:"price-c"},le={key:0,class:"market_next",src:B,alt:""},re={setup(s){const i=U(),e=E({list:[],loading:!1,finished:!1,refreshing:!1,listQuery:{action:"GetMarketMemberProductDefaultList",pageNo:1,pageSize:10},listTotal:0,isLoading:!1,active:0,tabs:[{label:"\u63A8\u8350",value:0},{label:"\u4F5C\u54C1",value:1}],SearchShow:!1});R(()=>{}),b(()=>e.active,o=>{e.loading=!0;let t={action:"",pageNo:1};o==0?t.action="GetMarketMemberProductDefaultList":o==1&&(t.action="GetMarketProductList"),e.list=[],e.listTotal=0,e.listQuery=p(p({},e.listQuery),t)}),b(()=>e.listQuery,()=>g(),{deep:!0,immediate:!0});const P=()=>{e.loading=!0,e.isLoading=!0,e.list=[],e.listTotal=0,e.listQuery.pageNo==1?g():e.listQuery.pageNo=1},x=()=>{if(e.list.length>=e.listTotal)return!1;e.list.length<e.listTotal&&!e.loading&&(e.loading=!0,e.listQuery.pageNo+=1)};async function g(){try{let o=p({},e.listQuery);const t=await J(o);if(e.isLoading=!1,e.loading=!1,t.code!=0)return!1;e.listTotal=t.total;let r=[...e.list,...t.data];r.length>=e.listTotal?e.finished=!0:e.finished=!1,e.list=r}catch{e.isLoading=!1}}const w=o=>{let{action:t}=e.listQuery;if(t=="GetMarketMemberProductDefaultList"&&o.Status!=3)return!1;let r={path:"",query:{id:o.ProductId}};t=="GetMarketMemberProductDefaultList"?(r.path="/market/marketList/marketDetail",r.query={type:"GetMarketMemberProductInfo",id:o.Id}):t=="GetMarketProductList"&&(r.path="/market/marketList"),i.push(r)};return(o,t)=>{const r=m("van-search"),Q=m("van-list"),D=m("van-tab"),G=m("van-tabs"),I=m("van-pull-refresh"),N=$("lazy");return n(),u("div",X,[_(r,{placeholder:"\u641C\u7D22\u5546\u54C1\u3001\u85CF\u54C1\u3001\u4E13\u8F91",onClick:t[0]||(t[0]=c=>a(e).SearchShow=!0),disabled:""}),_(I,{style:{"min-height":"100%"},modelValue:a(e).isLoading,"onUpdate:modelValue":t[3]||(t[3]=c=>a(e).isLoading=c),onRefresh:P},{default:f(()=>[_(G,{style:{height:"100%"},class:"market-tab",active:a(e).active,"onUpdate:active":t[2]||(t[2]=c=>a(e).active=c),sticky:"",swipeable:"",color:"#2e2f33"},{default:f(()=>[(n(!0),u(L,null,M(a(e).tabs,(c,ne)=>(n(),h(D,{name:c.value,title:c.label},{default:f(()=>[a(e).list.length?(n(),h(Q,{key:0,modelValue:a(e).loading,"onUpdate:modelValue":t[1]||(t[1]=l=>a(e).loading=l),finished:a(e).finished,offset:150,"finish-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:x},{finished:f(()=>[Y]),default:f(()=>[d("div",Z,[(n(!0),u(L,null,M(a(e).list,(l,V)=>(n(),u("div",{class:"market_item",key:V,onClick:ce=>w(l)},[d("div",{class:F(["market_top",{mask:a(e).listQuery.action=="GetMarketMemberProductDefaultList"&&l.Status!=3}])},[a(e).listQuery.action=="GetMarketMemberProductDefaultList"&&l.Status!=3?(n(),u("div",te,v(l.StatusText),1)):S("",!0),j(d("img",{src:l.ProductImage,alt:""},null,8,ae),[[N,l.ProductImage]])],2),d("div",se,v(l.ProductName),1),d("div",ie,[d("span",oe,"\xA5"+v(l.SalePrice),1),a(e).listQuery.action=="GetMarketMemberProductDefaultList"?(n(),u("img",le)):S("",!0)])],8,ee))),128))])]),_:2},1032,["modelValue","finished"])):(n(),h(K,{key:1,text:a(e).loading?"\u6570\u636E\u52A0\u8F7D\u4E2D...":"\u6682\u65F6\u6CA1\u6709\u6570\u636E\u54E6~"},null,8,["text"]))]),_:2},1032,["name","title"]))),256))]),_:1},8,["active"])]),_:1},8,["modelValue"]),_(O,{show:a(e).SearchShow,onCancel:t[4]||(t[4]=c=>a(e).SearchShow=!1)},null,8,["show"])])}}};var be=q(re,[["__scopeId","data-v-29b08799"]]);export{be as default};
