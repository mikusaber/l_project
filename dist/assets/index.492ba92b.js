import{_ as y,r as h,a as k,u as a,o as _,c as O,i as e,m as j,t as c,h as m,d as b,l as I,p as g,j as D,e as P,T as x,f as S,k as w}from"./index.7dbf11ab.js";import{T as L}from"./index.02745042.js";import{G as f,S as M}from"./market.4437a618.js";import"./request.869d566e.js";const l=r=>(g("data-v-ebefc056"),r=r(),D(),r),C={key:0,class:"marketDetail"},T={class:"marketDetail_top"},q=["src"],B={class:"justifyCenter"},G={class:"marketDetail_title",style:{"font-weight":"600"}},H={class:"marketDetail_price"},N=l(()=>e("div",{class:"views"},null,-1)),$={class:"user-info"},z={class:"user-item"},R=l(()=>e("span",null,"\u6301\u6709\u5730\u5740",-1)),V=l(()=>e("div",{class:"views"},null,-1)),A={class:"marketDetail_intro"},E=l(()=>e("div",{class:"marketDetail_title",style:{"margin-left":"20px"}},"\u5546\u54C1\u8BE6\u60C5",-1)),F=["innerHTML"],J={class:"marketDetail_bottom"},K={class:"btn-text"},Q={class:"btn-text"},U={setup(r){const u=P(),i=x(),t=h({detailObj:null,isLoading:!1});k(()=>{p()});const p=async()=>{try{if(i.query.type=="GetMarketMemberProductInfo"){let o={id:i.query.id,action:i.query.type};const s=await f(o);if(t.isLoading=!1,s.code!=0)return!1;t.detailObj=s.data}else{let o={ProductId:i.query.id,action:i.query.type};const s=await f(o);if(t.isLoading=!1,s.code!=0)return!1;t.detailObj=s.data}}catch{t.isLoading=!1}},v=async()=>{try{let o={action:"SubmitOrder",ProductId:t.detailObj.ProductId};const s=await M(o);if(s.code!=0)return L(s.message),setTimeout(()=>{p()},1500),!1;let{Id:d,OrderId:n}=s.data;u.push(`/payment?id=${d}&order=${n}`)}catch(o){console.log(o)}};return(o,s)=>{const d=S("van-button"),n=w("lazy");return a(t).detailObj?(_(),O("div",C,[e("div",T,[j(e("img",{src:a(t).detailObj.ProductImage},null,8,q),[[n,a(t).detailObj.ProductImage]])]),e("div",B,[e("div",G,c(a(t).detailObj.ProductName),1),e("div",H,"\xA5 "+c(a(t).detailObj.SalePrice),1)]),N,e("div",$,[e("p",z,[R,e("span",null,c(a(t).detailObj.Address||"-"),1)])]),V,e("div",A,[E,e("div",{class:"text",innerHTML:a(t).detailObj.Description},null,8,F)]),e("div",J,[a(t).detailObj.IsHasStock?(_(),m(d,{key:0,onClick:v,class:"buy-btn",block:""},{default:b(()=>[e("span",K," \xA5 "+c(a(t).detailObj.SalePrice)+" \xA0\xA0\xA0\xA0\u7ACB\u5373\u8D2D\u4E70",1)]),_:1})):(_(),m(d,{key:1,onClick:s[0]||(s[0]=()=>{a(u).push(`/market/marketList?id=${a(t).detailObj.ProductId}`)}),class:"buy-btn",block:""},{default:b(()=>[e("span",Q," \xA5 "+c(a(t).detailObj.SalePrice)+" \xA0\xA0\xA0\xA0\u53BB\u5E02\u573A\u770B\u770B",1)]),_:1}))])])):I("",!0)}}};var tt=y(U,[["__scopeId","data-v-ebefc056"]]);export{tt as default};
