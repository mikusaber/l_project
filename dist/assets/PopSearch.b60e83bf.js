import{c as k}from"./index.014ecec4.js";import{E as w}from"./Empty.980eecc3.js";import{_ as P}from"./lodash.e3e97856.js";import{_ as C,e as V,O as b,r as x,w as B,a as N,f as i,o as s,c as l,b as h,d as L,i as E,u as c,F,g as I,t as U,h as $,S as z}from"./index.7dbf11ab.js";const D={class:"search"},G={key:0,class:"tag-con"},M=["onClick"],O={props:{show:{type:Boolean}},emits:["cancel"],setup(d,{emit:u}){const r=d,_=V(),o=b(null),a=x({search:"",tags:[]});B(()=>r.show,()=>{console.log(r.show),r.show&&o.value&&(o.value&&o.value.focus(),setTimeout(()=>{o.value.focus()},0))}),N(()=>{p()});const m=e=>{_.push(`/market/marketList?id=${e.ProductId}`),u("cancel")},p=async()=>{try{let e={action:"SearchProduct",SearchName:a.search};if(!e.SearchName)return;const t=await k(e);if(t.code!=0)return!1;a.tags=t.data}catch(e){console.log(e)}},v=P.debounce(e=>{p()},100),f=e=>{u("cancel")};return(e,t)=>{const g=i("van-search"),y=i("van-popup");return s(),l("div",{class:z(["popup-search",r.show?"":"opacity"])},[h(y,{show:!0,position:"bottom",style:{height:"100%"}},{default:L(()=>[E("div",D,[h(g,{ref_key:"PopSearch",ref:o,"input-align":"center","show-action":"",modelValue:c(a).search,"onUpdate:modelValue":[t[0]||(t[0]=n=>c(a).search=n),c(v)],placeholder:"\u641C\u7D22\u5546\u54C1\u3001\u85CF\u54C1\u3001\u4E13\u8F91",onSearch:p,onCancel:f,clearable:!0},null,8,["modelValue","onUpdate:modelValue"]),c(a).tags.length?(s(),l("div",G,[(s(!0),l(F,null,I(c(a).tags,(n,S)=>(s(),l("span",{key:S,onClick:R=>m(n),class:"btn"},U(n.ProductName),9,M))),128))])):(s(),$(w,{key:1}))])]),_:1})],2)}}};var H=C(O,[["__scopeId","data-v-a97e8774"]]);export{H as P};
