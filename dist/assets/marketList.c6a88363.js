var I=Object.defineProperty;var h=Object.getOwnPropertySymbols;var N=Object.prototype.hasOwnProperty,M=Object.prototype.propertyIsEnumerable;var g=(e,s,a)=>s in e?I(e,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[s]=a,k=(e,s)=>{for(var a in s||(s={}))N.call(s,a)&&g(e,a,s[a]);if(h)for(var a of h(s))M.call(s,a)&&g(e,a,s[a]);return e};import{_ as P}from"./next.234c8bae.js";import{_ as C,r as Q,a as w,w as z,o as d,c as u,b as B,d as _,u as r,e as D,T as R,f as v,k as q,h as y,i,F as E,g as G,S as F,t as p,l as U,m as j,q as $,p as A,j as H}from"./index.7dbf11ab.js";import"./index.02745042.js";import{a as J}from"./market.4437a618.js";import{E as K}from"./Empty.980eecc3.js";import"./request.869d566e.js";/* empty css                                                          */const m=e=>(A("data-v-7bb66898"),e=e(),H(),e),O={class:"market"},W=m(()=>i("p",null,"\u6CA1\u6709\u66F4\u591A\u4E86",-1)),X={class:"market_list"},Y=["onClick"],Z={key:0,class:"text-status"},tt=["src"],et={class:"market_title"},st={class:"market_price"},at=m(()=>i("span",null,"\xA5",-1)),ot=m(()=>i("img",{src:P,alt:""},null,-1)),it={setup(e){const s=D(),a=R(),t=Q({list:[],isLoading:!1,loading:!1,finished:!1,listQuery:{pageNo:1,pageSize:10},listTotal:0});w(()=>{}),z(()=>t.listQuery,()=>f(),{deep:!0,immediate:!0});const L=()=>{t.loading=!0,t.isLoading=!0,t.list=[],t.listTotal=0,t.listQuery.pageNo==1?f():t.listQuery.pageNo=1},x=()=>{if(t.list.length==t.listTotal)return!1;t.list.length<t.listTotal&&!t.loading&&(t.loading=!0,t.listQuery.pageNo+=1)};async function f(){try{let n=k({productId:a.query.id,action:"GetMarketMemberProductList"},t.listQuery);const l=await J(n);if(t.isLoading=!1,t.loading=!1,l.code!=0)return!1;t.listTotal=l.total;let c=[...t.list,...l.data];c.length>=t.listTotal?t.finished=!0:t.finished=!1,t.list=c}catch(n){console.log(n),t.isLoading=!1}}const S=async n=>{n.Status==3&&s.push({path:"/market/marketList/marketDetail",query:{id:n.Id,type:"GetMarketMemberProductInfo"}})};return(n,l)=>{const c=v("van-list"),T=v("van-pull-refresh"),V=q("lazy");return d(),u("div",O,[B(T,{style:{"min-height":"100%"},modelValue:r(t).isLoading,"onUpdate:modelValue":l[1]||(l[1]=o=>r(t).isLoading=o),onRefresh:L},{default:_(()=>[r(t).list.length?(d(),y(c,{key:0,style:{"min-height":"100%","padding-bottom":"50px"},modelValue:r(t).loading,"onUpdate:modelValue":l[0]||(l[0]=o=>r(t).loading=o),finished:r(t).finished,offset:10,"finish-text":"\u6CA1\u6709\u66F4\u591A\u4E86",onLoad:x},{finished:_(()=>[W]),default:_(()=>[i("div",X,[(d(!0),u(E,null,G(r(t).list,(o,b)=>(d(),u("div",{class:"market_item",key:b,onClick:lt=>S(o)},[i("div",{class:F(["market_top",{mask:o.Status!=3}])},[o.Status!=3?(d(),u("div",Z,p(o.StatusText),1)):U("",!0),j(i("img",{src:o.ProductImage,alt:""},null,8,tt),[[V,o.ProductImage]])],2),i("div",et,p(o.ProductName),1),i("div",st,[i("div",null,[at,$(" "+p(o.SalePrice),1)]),ot])],8,Y))),128))])]),_:1},8,["modelValue","finished"])):(d(),y(K,{key:1,text:r(t).loading?"\u6570\u636E\u52A0\u8F7D\u4E2D...":"\u6682\u65F6\u6CA1\u6709\u6570\u636E\u54E6~"},null,8,["text"]))]),_:1},8,["modelValue"])])}}};var ft=C(it,[["__scopeId","data-v-7bb66898"]]);export{ft as default};
